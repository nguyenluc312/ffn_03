<h1><%= t ".players_manager" %></h1>
<div>
  <%= link_to new_admin_player_path, class: "btn btn-primary no-radius" do %>
    <span class="glyphicon glyphicon-plus"></span>
    <span><%= t ".create_player" %></span>
  <% end %>
</div>
<%= search_form_for @search, class: "form-inline" do |f| %>
  <div class="form-group">
    <%= f.text_field :name_cont, placeholder: t(".search_name"), class: "form-control" %>
  </div>
  <div class="form-group">
    <%= f.select :position_eq, options_for_select(Player.positions, @search.position_eq),
      {include_blank: t(".select_position")}, class: "form-control" %>
  </div>
  <div class="form-group search-country">
    <%= f.select :country_id_eq, options_for_select(@countries, @search.country_id_eq),
      {include_blank: t(".select_country")}, class: "form-control" %>
  </div>
  <div class="form-group">
    <%= f.button class: "btn btn-primary no-radius" do %>
      <span class="glyphicon glyphicon-search"></span>
      <span><%= t ".search" %></span>
    <% end %>
  </div>
<% end %>

<% if @players.any? %>
  <%= paginate @players %>
  <table class="table table-striped table-bordered not-overflow" id="table-manager-players" %>
    <thead>
      <th class="index center">#</th>
      <th class="avatar center"><%= t ".avatar" %></th>
      <th class="name"><%= t ".name" %></th>
      <th class="country-flag center"><%= t ".flag" %></th>
      <th class="country-name"><%= t ".country_name" %></th>
      <th class="team-logo center"><%= t ".logo" %></th>
      <th class="team-name"><%= t ".team_name" %></th>
      <th class="position"><%= t ".position" %></th>
      <th class="action"><%= t ".action" %></th>
    </thead>
    <tbody>
      <% @players.each_with_index do |player, index| %>
        <tr>
          <td class="center">
            <%= Settings.players.per_page * (@players.current_page - 1) + index + 1 %>
          </td>
          <td class="center"><%= image_tag player.avatar.small.url %></td>
          <td><%= player.name %></td>
          <td class="center">
            <%= image_tag player.country.flag.url, size: Settings.country.size_small %>
          </td>
          <td><%= player.country_name %></td>
          <td class="center">
            <%= player.team ? image_tag(player.team_logo.small.url) : "-" %>
          </td>
          <td><%= player.team_name || "-" %></td>
          <td><%= player.position %></td>
          <td class="center">
            <%= link_to edit_admin_player_path(player), title: t(".edit_player") do %>
              <span class="glyphicon glyphicon-edit"></span>
            <% end %>
            <%= link_to admin_player_path(player), method: :delete, title: t(".delete_player"),
              data: {confirm: t(".confirm_delete", player: player.name)} do %>
              <span class="glyphicon glyphicon-trash"></span>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= paginate @players %>
<% else %>
  <div class="no-result"><%= t ".no_player" %></div>
<% end %>
